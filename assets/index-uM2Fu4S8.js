import{o as xe,q as me,a9 as pe,s as fe,aa as ue,ab as ge,ac as be,ad as he,r as o,C as te,m as Z,ae as je,Z as Ne,T as X,$ as we,af as ve,Q as Be,u as T,j as e,a7 as ke,a as se,B as z,E as V,ag as ye,ah as Se,b as Ce,l as y,ai as _e}from"./index-XRI2Zuhs.js";import{P as ne,G as Oe,u as q,a as Fe}from"./useRequest-DPXUNwp8.js";import{V as U}from"./index-C3_dq6-e.js";import{V as Y}from"./index-DgZcODGp.js";import{T as Ee}from"./index-CWYTNAAu.js";import{I as ae,P as Pe}from"./Pagination-DKpXJPYw.js";import{T as $e}from"./index-OYB7TihJ.js";const D=t=>t?typeof t=="function"?t():t:null,Ie=t=>{const{componentCls:a,popoverColor:l,titleMinWidth:n,fontWeightStrong:r,innerPadding:d,boxShadowSecondary:i,colorTextHeading:u,borderRadiusLG:s,zIndexPopup:f,titleMarginBottom:b,colorBgElevated:c,popoverBg:g,titleBorderBottom:x,innerContentPadding:k,titlePadding:p}=t;return[{[a]:Object.assign(Object.assign({},fe(t)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:f,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":c,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${a}-content`]:{position:"relative"},[`${a}-inner`]:{backgroundColor:g,backgroundClip:"padding-box",borderRadius:s,boxShadow:i,padding:d},[`${a}-title`]:{minWidth:n,marginBottom:b,color:u,fontWeight:r,borderBottom:x,padding:p},[`${a}-inner-content`]:{color:l,padding:k}})},ue(t,"var(--antd-arrow-background-color)"),{[`${a}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow,display:"inline-block",[`${a}-content`]:{display:"inline-block"}}}]},Me=t=>{const{componentCls:a}=t;return{[a]:ge.map(l=>{const n=t[`${l}6`];return{[`&${a}-${l}`]:{"--antd-arrow-background-color":n,[`${a}-inner`]:{backgroundColor:n},[`${a}-arrow`]:{background:"transparent"}}}})}},Te=t=>{const{lineWidth:a,controlHeight:l,fontHeight:n,padding:r,wireframe:d,zIndexPopupBase:i,borderRadiusLG:u,marginXS:s,lineType:f,colorSplit:b,paddingSM:c}=t,g=l-n,x=g/2,k=g/2-a,p=r;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:i+30},be(t)),he({contentRadius:u,limitVerticalRadius:!0})),{innerPadding:d?0:12,titleMarginBottom:d?0:s,titlePadding:d?`${x}px ${p}px ${k}px`:0,titleBorderBottom:d?`${a}px ${f} ${b}`:"none",innerContentPadding:d?`${c}px ${p}px`:0})},le=xe("Popover",t=>{const{colorBgElevated:a,colorText:l}=t,n=me(t,{popoverBg:a,popoverColor:l});return[Ie(n),Me(n),pe(n,"zoom-big")]},Te,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Ue=function(t,a){var l={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(l[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(l[n[r]]=t[n[r]]);return l};const re=t=>{let{title:a,content:l,prefixCls:n}=t;return!a&&!l?null:o.createElement(o.Fragment,null,a&&o.createElement("div",{className:`${n}-title`},a),l&&o.createElement("div",{className:`${n}-inner-content`},l))},Ae=t=>{const{hashId:a,prefixCls:l,className:n,style:r,placement:d="top",title:i,content:u,children:s}=t,f=D(i),b=D(u),c=Z(a,l,`${l}-pure`,`${l}-placement-${d}`,n);return o.createElement("div",{className:c,style:r},o.createElement("div",{className:`${l}-arrow`}),o.createElement(je,Object.assign({},t,{className:a,prefixCls:l}),s||o.createElement(re,{prefixCls:l,title:f,content:b})))},Re=t=>{const{prefixCls:a,className:l}=t,n=Ue(t,["prefixCls","className"]),{getPrefixCls:r}=o.useContext(te),d=r("popover",a),[i,u,s]=le(d);return i(o.createElement(Ae,Object.assign({},n,{prefixCls:d,hashId:u,className:Z(l,s)})))};var We=function(t,a){var l={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(l[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)a.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(l[n[r]]=t[n[r]]);return l};const Ve=o.forwardRef((t,a)=>{var l,n;const{prefixCls:r,title:d,content:i,overlayClassName:u,placement:s="top",trigger:f="hover",children:b,mouseEnterDelay:c=.1,mouseLeaveDelay:g=.1,onOpenChange:x,overlayStyle:k={}}=t,p=We(t,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:$}=o.useContext(te),j=$("popover",r),[S,I,O]=le(j),M=$(),N=Z(u,I,O),[F,L]=Ne(!1,{value:(l=t.open)!==null&&l!==void 0?l:t.visible,defaultValue:(n=t.defaultOpen)!==null&&n!==void 0?n:t.defaultVisible}),A=(w,h)=>{L(w,!0),x==null||x(w,h)},G=w=>{w.keyCode===Be.ESC&&A(!1,w)},J=w=>{A(w)},C=D(d),v=D(i);return S(o.createElement(X,Object.assign({placement:s,trigger:f,mouseEnterDelay:c,mouseLeaveDelay:g,overlayStyle:k},p,{prefixCls:j,overlayClassName:N,ref:a,open:F,onOpenChange:J,overlay:C||v?o.createElement(re,{prefixCls:j,title:C,content:v}):null,transitionName:we(M,"zoom-big",p.transitionName),"data-popover-inject":!0}),ve(b,{onKeyDown:w=>{var h,_;o.isValidElement(b)&&((_=b==null?void 0:(h=b.props).onKeyDown)===null||_===void 0||_.call(h,w)),G(w)}})))}),oe=Ve;oe._InternalPanelDoNotUseOrYouWillBeFired=Re;const ze=({name:t,state:a,task_id:l,start_time:n,end_time:r})=>{const{t:d}=T();return e.jsxs("div",{className:"flex-1 border border-solid border-[rgba(137,137,137,0.1)] bg-gradient-to-r from-[#020202] to-[#141414] font-Urbanist",children:[e.jsxs("div",{className:"node-card relative flex w-full items-center justify-between bg-[rgba(255,255,255,0.04)] px-7 py-5",children:[e.jsx("img",{className:"absolute right-0 top-1 z-0 block h-16 w-32 object-contain",src:`${OSS_URL}/images/node/decoration.png`,alt:"decoration"}),e.jsx("span",{className:"sm-text text-xl font-bold leading-8",children:t}),e.jsx("span",{className:`xs-text relative z-10 rounded px-2.5 py-1 text-sm font-bold ${a===2?"bg-[#1B2F28] text-[#2AEDA7]":"bg-[#362224] text-[#D4505C]"}`,children:a===2?"Complete":"Failed"})]}),e.jsxs("div",{className:"node-card flex flex-col gap-4 p-7",children:[e.jsxs("div",{className:"flex justify-between gap-2 text-base leading-5",children:[e.jsx("span",{className:"xs-texttext-[#B1B1B1]",children:d("node.task_id")}),e.jsx("span",{className:"xs-text font-semibold",children:l})]}),e.jsxs("div",{className:"flex justify-between gap-2 text-base leading-5",children:[e.jsx("span",{className:"xs-text text-[#B1B1B1]",children:d("node.start_time")}),e.jsx("span",{className:"xs-text font-semibold",children:n.substring(0,19).replace("T"," ")})]}),e.jsxs("div",{className:"flex justify-between gap-2 text-base leading-5",children:[e.jsx("span",{className:"xs-text text-[#B1B1B1]",children:d("node.end_time")}),e.jsx("span",{className:"xs-text font-semibold",children:r.substring(0,19).replace("T"," ")})]})]})]})},De=({validation:t,CPU:a,disk:l})=>{const{t:n}=T();return e.jsxs(U,{className:"figure flex h-[10.625rem] w-full py-10",children:[e.jsxs("div",{className:"figure-list flex flex-1 flex-col justify-between px-8 font-Urbanist",children:[e.jsx("p",{className:"text-lg leading-5 text-[#B1B1B1]",children:n("node.validation")}),e.jsxs("div",{className:"flex items-end gap-1",children:[e.jsx("span",{className:"lg text-4xl font-bold",children:(t*100).toFixed(2)}),e.jsx("span",{className:"text-lg leading-6 text-[#B1B1B1]",children:"%"})]})]}),e.jsxs("div",{className:"figure-list flex flex-1 flex-col justify-between border-l border-solid border-[#1F1F1F] px-8",children:[e.jsx("p",{className:"text-lg leading-5 text-[#B1B1B1]",children:"CPU"}),e.jsxs("div",{className:"flex items-end gap-1",children:[e.jsx("span",{className:"lg text-4xl font-bold",children:a}),e.jsx("span",{className:"text-lg leading-6 text-[#B1B1B1]",children:"%"})]})]}),e.jsxs("div",{className:"figure-list flex flex-1 flex-col justify-between border-l border-solid border-[#1F1F1F] px-8",children:[e.jsx("p",{className:"text-lg leading-5 text-[#B1B1B1]",children:n("node.disk")}),e.jsxs("div",{className:"flex items-end gap-1",children:[e.jsx("span",{className:"lg text-4xl font-bold",children:l}),e.jsx("span",{className:"text-lg leading-6 text-[#B1B1B1]",children:"%"})]})]})]})},Le=({type:t,nodeId:a,lastUpdate:l})=>{const n=ke(),{t:r}=T();return e.jsx("div",{className:"node-info mb-10 h-44 w-full overflow-hidden border-b border-solid border-[#444] bg-[#111] font-Urbanist",children:e.jsxs("div",{className:"top-box mx-auto flex h-full w-352.5 flex-col justify-center gap-2.5 overflow-hidden",children:[e.jsxs("p",{className:"back-font flex cursor-pointer items-center gap-1.5 text-lg leading-5 text-[#B1B1B1]",onClick:()=>n("/node"),children:[e.jsx("i",{className:"i-ri:arrow-left-line text-sm leading-none"}),r("node.back_to_node")]}),e.jsxs("p",{className:"node-id flex items-center gap-4 text-[1.75rem] font-semibold leading-8",children:[e.jsx("span",{className:"first-span text-[#4B4B4B]",children:r("node.node_id")}),e.jsx("span",{children:a})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ee,{bordered:!1,color:t==="Computing"||t==="컴퓨터"?"success":"volcano",className:`tag-font font-Urbanist text-base font-bold leading-7 ${t==="Computing"||t==="컴퓨터"?"!text-[#2AEDA7]":"!text-[#CC6228]"}`,children:t}),l?e.jsx("span",{className:"tag-info",children:l.substring(0,19).replace("T"," ")}):e.jsxs("div",{className:"flex items-center gap-2.5 font-Urbanist text-sm font-semibold text-[#B1B1B1]",children:[e.jsx("i",{className:"block h-1.5 w-1.5 rounded-full bg-[#F54040] shadow-[0_0_0_3px_#1E1E1E]"}),e.jsx("span",{children:"Offline"})]})]})]})})},Ge=({days:t,hours:a,minutes:l,taskList:n})=>{const{t:r}=T();return e.jsxs(U,{className:"monitor flex w-full flex-col justify-between px-8 py-10 font-Urbanist",children:[e.jsxs("p",{className:"flex items-center font-Urbanist",children:[e.jsx("span",{className:"xs-text mr-auto text-lg leading-5 text-[#B1B1B1]",children:r("node.monitor_is_up")}),e.jsx("span",{className:"xs-text bg-[#1F1F1F] p-1.5 text-sm leading-4 text-[rgba(255,255,255,0.37)]",children:r("node.last_30_tasks")})]}),e.jsxs("p",{className:"timer sm-text mb-7 mt-5 font-Urbanist text-4xl font-bold",children:[t," ",r("node.days")," ",a," ",r("node.hours")," ",l," ",r("node.minutes")]}),e.jsx("div",{className:"flex min-h-6 flex-wrap gap-1.5",children:n.length>0?n.map(d=>e.jsx(oe,{placement:"bottomLeft",title:"",destroyTooltipOnHide:!0,arrow:!1,color:"#141414",overlayInnerStyle:{padding:"20px 0 0 0",border:"1px solid rgba(137,137,137,0.19)",borderRadius:0},content:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:`mx-5 rounded ${d.state!==2?"bg-[#DD2426]":"bg-[#2AEDA7]"} px-2 py-0.5 font-Urbanist text-base font-bold leading-5`,children:d.state!==2?"Failed":"Complete"}),e.jsx("p",{className:"mt-4 border-t border-solid border-[rgba(137,137,137,0.19)] px-5 font-Urbanist text-xs leading-9",children:d.startTime.substring(0,19).replace("T"," ")})]}),children:e.jsx("i",{className:`block h-6 w-6 rounded ${d.state!==2?"bg-[#DD2426]":"bg-[#2AEDA7]"}`})},d.startTime)):e.jsx("p",{className:"h-6 w-full text-center font-Urbanist text-base leading-6 text-white",children:r("node.no_task")})})]})},ee=({nodeId:t,owner:a,bindWallet:l,macAddress:n,lanIp:r,onStake:d,onUnStake:i,onSuccess:u,staked:s=0})=>{const{t:f}=T(),{context:b}=se(),{evaluation:c,operate:g}=b||{},x=o.useMemo(()=>c?c.wallet===a:!1,[c,a]),k=o.useMemo(()=>c&&l,[c,l]),p=o.useMemo(()=>r.split(".").slice(0,2).join(".")+".*.*",[r]),[$,j]=o.useState(!1),[S,I]=o.useState("");o.useEffect(()=>{c&&console.log("evaluation",c)},[c]);const O=()=>{c?g.powBindNode(t).then(()=>u()).catch(N=>V.error(`${N}`)):g.connect()},M=()=>{if(S){if(!ye(S)){V.error("wallet invalid");return}}else{V.warning(f("node.wallet_tips"));return}g.powNodeBindUpdate(t,S).then(()=>{j(!1),u()}).catch(N=>V.error(`${N}`))};return e.jsxs("div",{className:"specifics flex w-full flex-col gap-3 border border-solid border-[rgba(137,137,137,0.1)] bg-gradient-to-r from-[#020202] to-[#141414] px-8 pb-8 pt-10 font-Urbanist",children:[e.jsx("p",{className:"sm-text title-spe mb-2 font-Roboto text-2xl font-bold leading-7",children:f("node.more_details")}),e.jsx("p",{className:"xs-text text-lg leading-5 text-[#B1B1B1]",children:f("node.owner")}),$?e.jsxs("div",{className:"mb-2 flex items-center gap-2 overflow-hidden border-b border-solid border-[#1F1F1F] pb-5 text-2xl font-bold leading-7",children:[e.jsx(ae,{className:"xs-text bg-[#161616]",value:S,onChange:N=>I(N.target.value),allowClear:!0}),x&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"i-ri:check-line flex-shrink-0 cursor-pointer text-2xl leading-none",onClick:()=>{c?M():g.connect()}}),e.jsx("i",{className:"i-ri:close-fill flex-shrink-0 cursor-pointer text-2xl leading-none",onClick:()=>j(!1)})]})]}):e.jsxs("div",{className:"specifics-text mb-2 flex items-center gap-2 overflow-hidden border-b border-solid border-[#1F1F1F] pb-5 text-2xl font-bold leading-7",children:[e.jsx("p",{className:"truncate",children:x?a.slice(0,4)+"..."+a.slice(-6):"********"}),x&&k?e.jsx("i",{className:"spe-i i-ri:ball-pen-line flex-shrink-0 cursor-pointer text-2xl leading-none",onClick:()=>{c?(I(""),j(!0)):g.connect()}}):x&&!k&&e.jsx(z,{type:"primary",className:"bind-btn bg-[#9B40F7] text-base font-bold",onClick:()=>{c?O():g.connect()},children:f("node.bind")})]}),e.jsx("p",{className:"xs-text text-lg leading-5 text-[#B1B1B1]",children:f("node.staked")}),e.jsxs("p",{className:"specifics-text mb-2 flex items-end gap-2 border-b border-solid border-[#1F1F1F] pb-5 text-2xl font-bold leading-7",children:[s??0," ",e.jsx("span",{className:"text-sm font-normal text-[#B1B1B1]",children:"JVSC"}),x&&e.jsxs(e.Fragment,{children:[e.jsx(z,{type:"primary",className:"bg-[#9B40F7] text-base font-bold",onClick:d,children:f("node.stake")}),e.jsx(z,{className:"bg-[#262626] text-base font-bold",onClick:i,children:f("node.unstake")})]})]}),e.jsx("p",{className:"xs-text text-lg leading-5 text-[#B1B1B1]",children:f("node.mac_address")}),e.jsx("p",{className:"specifics-text mb-2 border-b border-solid border-[#1F1F1F] pb-5 text-2xl font-bold leading-7",children:n}),e.jsx("p",{className:"xs-text text-lg leading-5 text-[#B1B1B1]",children:f("node.ip_address")}),e.jsx("p",{className:"specifics-text pb-5 text-2xl font-bold leading-7",children:p})]})},Je=t=>ne("/pow/web3b/unSignweb/node/info",t),He=t=>ne("/pow/web3b/unSignweb/node/info/page",t),Ke=t=>Oe(`/pow/web3b/unSignweb/staking/range/now/${t}`),st=()=>{const{t}=T(),a=Se(),{context:l}=se(),{operate:n,evaluation:r}=l||{},{lamports:d,decimals:i}=Ce(n.splBalanceEmitter)??{},u=o.useMemo(()=>d?y(d,i):d===0?"0":"--",[d,i]),{data:s,run:f}=q(Je,{debounceWait:300,manual:!0}),b=o.useMemo(()=>r&&s?r.wallet===s.owner:!1,[r,s]),{data:c,run:g}=q(He,{debounceWait:300,manual:!0}),{data:x,runAsync:k}=q(Ke,{debounceWait:300,manual:!0}),[p,$]=o.useState(""),[j,S]=o.useState(""),[I,O]=o.useState(!1),[M,N]=o.useState("claim"),[F,L]=o.useState(!0),[A,G]=o.useState(0),[J,C]=o.useState(!1),[v,w]=o.useState(!1),[h,_]=o.useState(null),[E,H]=o.useState(!1),[P,R]=o.useState(!1),[Q,ie]=o.useState(window.innerWidth);o.useEffect(()=>{const m=()=>{ie(window.innerWidth)};return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[]),Fe(()=>{const m=new URLSearchParams(a.search),B=m.get("nodeId");B&&($(B),f({nodeId:B}),g(j?{current:1,pageSize:20,nodeId:B,taskId:j}:{current:1,pageSize:20,nodeId:B}))});const W=async m=>{r?(m==="stake"&&await k(p),w(m==="unstake"),_(null),R(!1),C(!0)):n.connect()},K=(m,B,ce)=>{N(m),L(B),B&&G(ce),O(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"content relative mx-auto w-full",children:[e.jsx(Le,{type:t("node.computing"),nodeId:p,lastUpdate:s?s.lastKeepAlive:"--"}),e.jsxs("div",{className:"content-box mx-auto mb-20 flex max-w-352.5 gap-10",children:[e.jsxs("div",{className:"left-content flex flex-1 flex-col gap-8",children:[e.jsx(De,{validation:s?s.validation:0,CPU:s?s.cpu:0,disk:s?s.disk:0}),Q<=1024&&e.jsxs(e.Fragment,{children:[e.jsxs(U,{className:"figure flex h-[10.625rem] w-full py-10",children:[e.jsxs("div",{className:"figure-list flex flex-1 flex-col justify-between px-8 font-Urbanist",children:[e.jsx("p",{className:"text-lg leading-5 text-[#B1B1B1]",children:t("node.reward_multiplier")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"lg text-4xl font-bold",children:[s?s.currentRewardMultiplier:1,"x"]}),b&&s&&s.currentRewardMultiplier!==s.rewardMultiplier&&e.jsx(X,{placement:"topLeft",title:t("node.tip7"),arrow:!1,color:"#000",trigger:"click",children:e.jsx("i",{className:"i-ri:lock-2-fill flex-shrink-0 cursor-pointer text-sm leading-none text-[#B1B1B1]"})})]})]}),e.jsxs("div",{className:"figure-list flex flex-1 flex-col justify-between border-l border-solid border-[#1F1F1F] px-8",children:[e.jsx("p",{className:"text-lg leading-5 text-[#B1B1B1]",children:t("node.total_earnings")}),e.jsx("div",{className:"flex items-end gap-1",children:e.jsxs("span",{className:"lg text-4xl font-bold",children:[s?s.totalEarnings:0," ",e.jsx("span",{className:"text-sm font-normal text-[#B1B1B1]",children:"JVSC"})]})})]})]}),e.jsx("div",{className:"details-list flex w-[25.625rem] flex-col gap-8",children:e.jsx(ee,{nodeId:p,owner:s?s.owner:"********",bindWallet:s?s.bindWallet:null,macAddress:s?s.macAddress[0]:"--",lanIp:s?s.lanIp:"--",staked:s?y(s.staked,i):0,onStake:()=>W("stake"),onUnStake:()=>W("unstake"),onSuccess:()=>f({nodeId:p})})})]}),e.jsx(Ge,{days:s?s.dayModel.days:0,hours:s?s.dayModel.hours:0,minutes:s?s.dayModel.minutes:0,taskList:s?s.taskList:[]}),e.jsx(ae,{className:"bg-[#161616]",placeholder:t("node.search_ids"),prefix:e.jsx("i",{className:"i-ri:search-line text-base leading-none !text-[#8D9094]"}),size:"large",value:j,onChange:m=>{S(m.target.value),g(m.target.value?{current:1,pageSize:20,nodeId:p,taskId:m.target.value}:{current:1,pageSize:20,nodeId:p})},allowClear:!0}),e.jsx("div",{className:"grid-list grid grid-cols-2 gap-5",children:c&&c.records.map(m=>e.jsx(ze,{name:m.typeName,state:m.state,task_id:m.taskId,start_time:m.startTime,end_time:m.endTime},m.taskId))}),!c||c.records.length===0&&e.jsx("p",{className:"w-full py-14 text-center font-Urbanist text-base text-white",children:"No data"}),e.jsx("div",{className:"flex justify-center",children:c&&e.jsx(Pe,{current:c.current,total:c.total,pageSize:20,showSizeChanger:!1,onChange:(m,B)=>g(j?{current:m,pageSize:B,nodeId:p,taskId:j}:{current:m,pageSize:B,nodeId:p})})})]}),Q>1024&&e.jsxs("div",{className:"flex w-[25.625rem] flex-col gap-8",children:[e.jsxs(U,{className:"w-full px-8 py-11.5 font-Urbanist",children:[e.jsx("p",{className:"mb-6 text-lg leading-5 text-[#B1B1B1]",children:t("node.reward_multiplier")}),e.jsxs("p",{className:"flex items-center gap-3 text-4xl font-bold leading-7",children:[e.jsxs("span",{children:[s?s.currentRewardMultiplier:1,"x"]}),b&&s&&s.currentRewardMultiplier!==s.rewardMultiplier&&e.jsx(X,{placement:"topLeft",title:t("node.tip7"),arrow:!1,color:"#000",children:e.jsx("i",{className:"i-ri:lock-2-fill flex-shrink-0 cursor-pointer text-xl leading-none text-[#B1B1B1]"})})]})]}),e.jsxs(U,{className:"w-full px-8 py-11.5 font-Urbanist",children:[e.jsx("p",{className:"mb-6 text-lg leading-5 text-[#B1B1B1]",children:t("node.total_earnings")}),e.jsxs("p",{className:"text-4xl font-bold leading-7",children:[s?y(s.totalEarnings,i):0," ",e.jsx("span",{className:"text-sm font-normal text-[#B1B1B1]",children:"JVSC"})]})]}),e.jsx(ee,{nodeId:p,owner:s?s.owner:"********",bindWallet:s?s.bindWallet:null,macAddress:s?s.macAddress[0]:"--",lanIp:s?s.lanIp:"--",staked:s?y(s.staked,i):0,onStake:()=>W("stake"),onUnStake:()=>W("unstake"),onSuccess:()=>f({nodeId:p})})]})]})]}),e.jsx(Y,{open:I,icon:`${OSS_URL}/images/${F?"confirm_success":"confirm_error"}.png`,title:t(F?"node.congratulations":M==="stake"?"node.staking_failed":"node.unstaking_failed"),desc:t(F?"node.tip1":"node.tip2"),okText:F?"OK":"Close",onOk:()=>O(!1),className:"modal-content",onCancel:()=>O(!1),children:e.jsx("div",{className:"mb-36 flex items-center justify-center font-Urbanist text-2xl font-bold text-white",children:F?`${A} JVSC`:""})}),e.jsx(Y,{open:J,className:"modal-content",title:t(v?"node.unstake":"node.stake"),footer:null,onCancel:()=>C(!1),children:e.jsxs("div",{className:"w-full px-2 pb-8",children:[e.jsxs("div",{className:"mb-2.5 flex h-5 items-center font-Urbanist",children:[e.jsx("span",{className:"mr-auto text-base font-bold text-[#9B40F7]",children:t("node.amount")}),e.jsxs("span",{className:"text-xs font-bold text-[#B1B1B1]",children:[t("node.your_balance"),": ",u," JVSC"]})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx($e,{className:"w-full rounded-md !border-[#3B3A45] bg-[#1F1E2B] focus-within:bg-[#1F1E2B] hover:bg-[#1F1E2B] focus:bg-[#1F1E2B]",value:h,onChange:m=>_(m),size:"large",min:1,max:E||P?Number.MAX_SAFE_INTEGER:v?s?Number(y(s.staked,i)):0:u?Math.floor(Number(u)):0,controls:!1,precision:0,disabled:E||P}),e.jsx("div",{className:`absolute right-2.5 top-2 w-10 rounded-full bg-[rgba(147,139,247,0.12)] text-center font-Urbanist text-sm font-bold leading-6 text-[#9B40F7] ${P?"cursor-not-allowed":"cursor-pointer"}`,onClick:()=>{P||_(v?s?Number(y(s.staked,i)):null:u?Math.floor(Number(u)):null)},children:t("node.max")})]}),e.jsx("div",{className:"h-44 pt-3 font-Urbanist text-base font-medium text-white",children:v?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex h-10 items-center justify-between",children:[e.jsx("span",{children:t("node.staked")}),e.jsxs("span",{children:[s?y(s.staked,i):0," JVSC"]})]}),e.jsxs("div",{className:"flex h-10 items-center justify-between",children:[e.jsx("span",{children:t("node.delay_time")}),e.jsx("span",{children:"7 days"})]})]}):e.jsxs("div",{className:"flex w-full items-center gap-1.5 rounded-md border border-[#3B3A45] px-2.5 py-3",children:[e.jsx("img",{className:"block h-9 w-11 object-contain",src:`${OSS_URL}/images/node/stake_logo.png`}),e.jsxs("p",{className:"flex-1 overflow-x-auto text-sm leading-4",children:[t("node.tip7_bf"),e.jsx("span",{className:"font-bold",children:x&&x.downOptimalStakeNum&&x.upOptimalStakeNum?y(x.downOptimalStakeNum,i)+"-"+y(x.upOptimalStakeNum,i):"--"}),t("node.tip7_af"),s&&s.currentRewardMultiplier===1.2?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),t("node.tip8")]}):s&&s.currentRewardMultiplier===1&&x&&x.downOptimalStakeNum&&x.upOptimalStakeNum?e.jsxs(e.Fragment,{children:[e.jsx("br",{}),t("node.tip9_bf"),x&&x.bestStakeNum?Math.ceil(Number(_e(x.bestStakeNum,i))):"--",t("node.tip9_af")]}):e.jsx(e.Fragment,{})]})]})}),e.jsxs("div",{className:"mb-1 flex gap-2 rounded border border-solid border-[#393939] p-2.5 text-[#888888]",children:[e.jsx("i",{className:"i-ri:information-fill flex-shrink-0 text-lg leading-none text-[#DFA455]"}),e.jsx("p",{className:"font-Urbanist text-sm font-bold leading-4 text-white",children:v?t("node.tip7"):t("node.tip6_bf")+100+t("node.tip6_af")})]}),e.jsxs(z,{disabled:!h||E,type:!h||E?"default":"primary",className:`h-12 font-Urbanist text-base font-bold ${h?E?"border-[#9B40F7] !bg-[rgba(0,0,0,0.2)] !text-white":"bg-[#9B40F7]":"!bg-[rgba(0,0,0,0.2)] !text-white"}`,size:"large",block:!0,onClick:()=>de(),children:[E&&e.jsx("img",{className:"block h-6 w-6 animate-spin object-contain",src:`${OSS_URL}/images/loading.svg`,alt:"load"}),P&&e.jsx("i",{className:"i-ri:check-line text-base leading-none"}),t(h?E?v?"node.unstaking":"node.staking":P?"node.stake_successful":v?"node.unstake":"node.stake":"node.enter_amount")]})]})})]});async function de(){P?(R(!1),C(!1),K(M,!0,Number(h))):(H(!0),v?n.powsUnstake(i||i===0?Number(h)*Math.pow(10,i):Number(h),p).then(()=>{!i&&i!==0||(f({nodeId:p}),N("unstake"))}).catch(()=>{C(!1),K("unstake",!1,null)}).finally(()=>{R(!0),H(!1)}):n.powsStake(i||i===0?Number(h)*Math.pow(10,i):Number(h),p).then(()=>{!i&&i!==0||(f({nodeId:p}),N("stake"))}).catch(()=>{C(!1),K("stake",!1,null)}).finally(()=>{R(!0),H(!1)}))}};export{st as default};
